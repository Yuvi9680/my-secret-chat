<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Assistant</title>
    <link rel="stylesheet" href="style.css">
    <!-- Scripts moved to end of body -->
</head>
<body>

    <div id="app-container">

        <!-- SCREEN 1: PASSWORD LOCK -->
        <div id="password-screen" class="screen">
            <div class="header"><div class="header-title"><h1>Secure Entry</h1></div></div>
            <form id="password-form">
                <p>Please enter the password to access.</p>
                <input type="password" id="password-input" placeholder="Password">
                <button type="submit" id="password-submit">Unlock</button>
                <p id="password-error">Incorrect password.</p>
            </form>
        </div>

        <!-- SCREEN 2: CHAT LIST -->
        <div id="chat-list-screen" class="screen">
            <div class="header">
                <div class="header-title"><h1>AI Assistants</h1></div>
                <div class="header-actions">
                    <button id="my-id-button" title="My Secret ID">â„¹ï¸</button>
                    <button id="add-friend-button" title="Add New AI Bot">â•</button>
                </div>
            </div>
            <div id="chat-list"><!-- List items here --></div>
        </div>

        <!-- SCREEN 3: CHAT ROOM -->
        <div id="chat-room-screen" class="screen">
            <div class="header">
                <button id="back-to-list-btn">â†</button>
                <div class="header-title" id="chat-room-header">
                    <h1 id="chat-room-name">AI Assistant</h1>
                    <p id="chat-room-status" class="offline">â— AI Offline</p>
                </div>
                <div class="header-actions">
                    <button id="voice-call-btn" title="Voice Call">ğŸ¤–</button>
                    <button id="video-call-btn" title="Video Call">ğŸ‘½</button>
                </div>
            </div>
            <div id="chat-window"><div id="message-list"></div></div>
            <form id="message-form">
                <textarea id="message-input" placeholder="Type a message..." rows="1"></textarea>
                <button type="button" id="lock-button" title="Lock Message">ğŸ”’</button>
                <button type="submit" id="send-button" title="Send">â¤</button>
            </form>
        </div>

    </div> <!-- End #app-container -->

    <!-- OVERLAYS -->
    <div id="modal" class="modal"> <div class="modal-content"> <h2 id="modal-title"></h2><p id="modal-text"></p> <input type="text" id="modal-input-text"><input type="password" id="modal-input-password"> <div class="modal-buttons"> <button id="modal-button-secondary" class="modal-button-secondary">Cancel</button> <button id="modal-button-primary" class="modal-button-primary">OK</button> </div> </div> </div>
    <div id="context-menu"><!-- Dynamic --></div>
    <div id="chat-list-context-menu"> <button id="context-rename">Rename AI Bot</button> <button id="context-lock">Set/Change Chat Lock</button> <button id="context-delete-chat" class="delete-danger">Delete Chat Permanently</button> </div>
    <div id="incoming-call-alert"> <h2 id="incoming-call-title"></h2><p id="incoming-call-from"></p> <div class="modal-buttons"> <button id="decline-call-btn" class="modal-button-secondary delete-danger">Decline</button> <button id="accept-call-btn" class="modal-button-primary">Accept</button> </div> </div>
    <div id="calling-screen"> <div id="video-container"> <video id="remote-video" autoplay playsinline></video> <video id="local-video" autoplay muted playsinline></video> </div> <div id="call-info-container"> <h2 id="calling-status">Connecting...</h2> <p id="call-timer">00:00</p> </div> <div id="call-controls-container"> <button id="toggle-mute-btn" title="Mute/Unmute">ğŸ¤</button> <button id="toggle-speaker-btn" title="Speaker On/Off">ğŸ”Š</button> <button id="toggle-video-btn" title="Camera On/Off">ğŸ“·</button> <button id="swap-video-btn" title="Swap Screens">ğŸ”„</button> <button id="hangup-button" title="Hang Up">ğŸ“</button> </div> </div>

    <!-- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="script.js"></script>
</body>
</html>


